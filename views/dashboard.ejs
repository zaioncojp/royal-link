<!DOCTYPE html>
<html lang="ja">
<%- include('partials/header') %>
<body>
  <!-- Background effects -->
  <div class="bg-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <div class="dashboard-container">
    <!-- Sidebar -->
    <%- include('partials/sidebar') %>

    <!-- Main content -->
    <div class="main-content">
      <header class="top-bar">
        <h1>ダッシュボード</h1>
        <a href="/dashboard" class="refresh-btn">
          <i class="fas fa-sync-alt"></i> 更新
        </a>
      </header>

      <% if (error) { %>
        <div class="alert alert-error">
          <i class="fas fa-exclamation-circle"></i> <%= error %>
        </div>
      <% } %>

      <% if (success) { %>
        <div class="alert alert-success">
          <i class="fas fa-check-circle"></i> <%= success %>
        </div>
      <% } %>

      <!-- URL shortening form -->
      <%- include('partials/url-form') %>

      <!-- URLs list -->
      <%- include('partials/urls-list') %>

      <!-- Domains list -->
      <%- include('partials/domains-list') %>
    </div>
  </div>

  <script>
    // タブ切り替え機能
    document.addEventListener('DOMContentLoaded', function() {
      const tabBtns = document.querySelectorAll('.tab-btn');
      
      tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          
          // 全てのタブボタンからアクティブクラスを削除
          tabBtns.forEach(btn => btn.classList.remove('active'));
          // 全てのタブパネルを非表示に
          document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
          
          // クリックされたタブボタンをアクティブに
          this.classList.add('active');
          // 対応するタブパネルを表示
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
    });
  </script>

  <style>
    /* 更新ボタンのスタイル */
    .refresh-btn {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.1);
      color: var(--light-color);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.3s;
      font-weight: 500;
      border: 1px solid var(--glass-border);
    }
    
    .refresh-btn i {
      margin-right: 0.5rem;
    }
    
    .refresh-btn:hover {
      background: var(--primary-gradient);
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(110, 142, 251, 0.3);
      color: white;
      text-decoration: none;
    }
    
    .refresh-btn:active {
      transform: translateY(1px);
    }
  </style>
</body>
</html>